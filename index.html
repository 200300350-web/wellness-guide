let _voices = [];
        function loadVoices() {
            _voices = window.speechSynthesis.getVoices() || [];
        }
        if ('speechSynthesis' in window) {
            window.speechSynthesis.onvoiceschanged = loadVoices;
            loadVoices();
        }

        function _chooseVoice(lang) {
            if (!_voices || !_voices.length) return null;
            const target = lang === 'en' ? 'en' : 'es';
            let v = _voices.find(x => x.lang && x.lang.toLowerCase().startsWith(target + '-'));
            if (v) return v;
            v = _voices.find(x => x.lang && x.lang.toLowerCase().startsWith(target));
            if (v) return v;
            return _voices[0] || null;
        }

        function speak(text, lang) {
            if (!('speechSynthesis' in window)) return;
            try {
                window.speechSynthesis.cancel();
                const msg = new SpeechSynthesisUtterance(text);
                msg.lang = lang === 'en' ? 'en-US' : 'es-ES';
                msg.rate = 0.95;
                const voice = _chooseVoice(lang);
                if (voice) msg.voice = voice;
                window.speechSynthesis.speak(msg);
            } catch (err) {
                console.error('speak() failed', err);
            }
        }

        const data = [
            { cat: "Vegetables", es: "Espinaca", en: "Spinach", info: "Ricas en antioxidantes. / Rich in antioxidants." },
            { cat: "Vegetables", es: "Col rizada", en: "Kale", info: "Ayuda a reducir inflamaciÃ³n. / Helps reduce inflammation." },
            { cat: "Vegetables", es: "Acelga", en: "Swiss Chard", info: "Alcalinizante y desintoxicante. / Alkalizing and detoxifying." },
            { cat: "Vegetables", es: "RÃºcula", en: "Arugula", info: "Apoya la desintoxicaciÃ³n. / Supports detoxification." },
            { cat: "Vegetables", es: "Diente de leÃ³n", en: "Dandelion Greens", info: "Apoya al hÃ­gado. / Supports the liver." },
            { cat: "Fungi", es: "Melena de leÃ³n", en: "Lion's Mane", info: "Salud cognitiva. / Cognitive health." },
            { cat: "Fungi", es: "Hongo Shiitake", en: "Shiitake Mushroom", info: "ModulaciÃ³n inmune. / Immune modulation." },
            { cat: "Roots", es: "Daikon", en: "Daikon Radish", info: "Favorece la digestiÃ³n. / Promotes digestion." },
            { cat: "Roots", es: "RaÃ­z de loto", en: "Lotus Root", info: "Reduce inflamaciÃ³n. / Reduces inflammation." },
            { cat: "Roots", es: "Betabel", en: "Beet", info: "Equilibrio de glucosa. / Blood glucose balance." },
            { cat: "Seaweed", es: "Algas marinas", en: "Seaweed", info: "Ricas en minerales. / Rich in minerals." },
            { cat: "Legumes", es: "Lentejas", en: "Lentils", info: "ProteÃ­na vegetal y hierro. / Plant-based protein." },
            { cat: "Legumes", es: "Garbanzos", en: "Chickpeas", info: "Ricos en zinc y fibra. / Rich in zinc." },
            { cat: "Legumes", es: "Frijoles negros", en: "Black Beans", info: "Polifenoles. / Polyphenols." },
            { cat: "Legumes", es: "Frijol mungo", en: "Mung Beans", info: "Altamente digestibles. / Highly digestible." },
            { cat: "Legumes", es: "Adzuki", en: "Adzuki Beans", info: "FunciÃ³n renal. / Support kidney function." },
            { cat: "Grains", es: "Arroz integral", en: "Brown Rice", info: "EnergÃ­a estable. / Stable energy." },
            { cat: "Grains", es: "Quinoa", en: "Quinoa", info: "ProteÃ­na completa. / Complete protein." },
            { cat: "Grains", es: "Trigo sarraceno", en: "Buckwheat", info: "Libre de gluten. / Gluten-free." },
            { cat: "Condiment", es: "Vinagre de Umeboshi", en: "Umeboshi Vinegar", info: "Combate la fatiga. / Fights fatigue." },
            { cat: "Fermented", es: "Ciruela Umeboshi", en: "Umeboshi Plum", info: "Fermentada con sal. / Fermented with salt." },
            { cat: "Fermented", es: "Miso", en: "Miso", info: "Soja fermentada. / Fermented soybean paste." },
            { cat: "Fermented", es: "Kimchi", en: "Kimchi", info: "Col fermentada picante. / Fermented cabbage." },
            { cat: "Fermented", es: "Chucrut", en: "Sauerkraut", info: "Col fermentada con sal. / Fermented cabbage." },
            { cat: "Fermented", es: "Ajo negro", en: "Black Garlic", info: "Potente antioxidante. / Potent antioxidant." },
            { cat: "Medicinal Teas", es: "TÃ© Kombu", en: "Kombu Tea", info: "Remineralizante y cognitivo. / Remineralizing and cognitive." },
            { cat: "Medicinal Teas", es: "Manzana y Kuzu", en: "Apple & Kuzu", info: "Relaja la mente e inmune. / Relaxes mind and immune." },
            { cat: "Medicinal Teas", es: "TÃ© de Azukis", en: "Azuki Bean Tea", info: "Sistema urinario y fatiga. / Urinary system and fatigue." },
            { cat: "Medicinal Teas", es: "Jengibre LimÃ³n", en: "Ginger Lemon Tea", info: "Antiinflamatorio y defensas. / Anti-inflammatory." },
            { cat: "Medicinal Teas", es: "Ume Sho Kuzu", en: "Ume Sho Kuzu", info: "Alivia acidez y gastritis. / Relieves heartburn." },
            { cat: "Medicinal Teas", es: "RaÃ­z de Loto", en: "Lotus Root Tea", info: "Alergias y pulmones. / Allergies and lungs." },
            { cat: "Medicinal Teas", es: "Agar-Agar", en: "Agar-Agar Tea", info: "Fibra y trÃ¡nsito intestinal. / Fiber source." },
            { cat: "Medicinal Teas", es: "TÃ© Mu", en: "Mu Tea", info: "Equilibrio hormonal. / Hormonal balance." },
            { cat: "Medicinal Teas", es: "TÃ© de Shiitake", en: "Shiitake Tea", info: "Reduce colesterol. / Reduces cholesterol." },
            { cat: "Medicinal Teas", es: "Daikon seco", en: "Dried Daikon Tea", info: "DiurÃ©tico y quema grasa. / Diuretic." },
            { cat: "Medicinal Teas", es: "Verduras dulces", en: "Sweet Vegetable Broth", info: "Regula glucosa. / Regulates glucose." },
            { cat: "Medicinal Teas", es: "TÃ© de Cebada", en: "Barley Tea", info: "Elimina grasa hepÃ¡tica. / Eliminates hepatic fat." },
            { cat: "Medicinal Teas", es: "TÃ© Kukicha", en: "Kukicha Tea", info: "Rico en calcio y digestivo. / Rich in calcium." },
            { cat: "Medicinal Teas", es: "TÃ© Zanahoria Daikon", en: "Carrot & Daikon Tea", info: "Adelgazamiento y celulitis. / Weight loss." },
            { cat: "Medicinal Teas", es: "TÃ© Hinojo", en: "Fennel Tea", info: "Alivia digestiones pesadas. / Relieves heavy digestion." }
        ];

        function search() {
            const inputElement = document.getElementById('searchInput');
            if (!inputElement) return;
            const input = inputElement.value.toLowerCase();
            const container = document.getElementById('results');
            if (!container) return;
            container.innerHTML = '';
            const filtered = data.filter(item => 
                item.es.toLowerCase().includes(input) || 
                item.en.toLowerCase().includes(input) || 
                item.info.toLowerCase().includes(input) ||
                item.cat.toLowerCase().includes(input)
            );
            if (filtered.length === 0) {
                container.innerHTML = '<div class="no-results">No results found / No se encontraron resultados.</div>';
                return;
            }
            filtered.forEach(item => {
                container.innerHTML += `
                    <div class="card">
                        <div class="category">${item.cat}</div>
                        <div class="product-header">
                            <span class="name-es" style="font-size: 0.9rem; color: var(--sha-stone); margin-bottom: 8px; display: block;">${item.es}</span>
                            <div class="name-row">
                                <span class="name-en" style="font-family: 'Cinzel', serif; font-size: 1.3rem; font-style: normal; color: var(--sha-charcoal);">${item.en}</span>
                                <button class="audio-btn" data-text="${encodeURIComponent(item.en)}" data-lang="en"><span>ðŸ”Š</span></button>
                            </div>
                        </div>
                        <div class="benefits-title">Properties & Benefits / Beneficios</div>
                        <div class="benefits-text">${item.info}</div>
                    </div>`;
            });
            const audioButtons = container.querySelectorAll('.audio-btn');
            audioButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const text = decodeURIComponent(btn.dataset.text || '');
                    speak(text, 'en');
                });
            });
        }
        // Esta lÃ­nea asegura que la lista se muestre apenas abra la app
        window.onload = search;
    </script>
</body>
</html>
        